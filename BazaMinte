import telebot
from telebot import types

API_TOKEN = ""
bot = telebot.TeleBot(API_TOKEN)
@bot.message_handler(commands=['start'])
def start_message(message):
    bot.send_message(message.chat.id,'Привет')
    bot.send_message(message.chat.id, 'Пропиши "/Info"')
@bot.message_handler(commands=['Info'])
def button_message(message):
        bot.send_message(message.chat.id,"Ютеб: https://www.youtube.com/@ItsMinTear ; Стеем: steamcommunity.com/profiles/76561199155817070 ; Твиткч : m.twitch.tv/mintear0k/home ; Тилиграмм : t.me/EtoMinTear")
        bot.send_message(message.chat.id, "Так же я могу подсчитать тебе какие-нибудь задачи или примеры, если напишешь '/math' (Подсчёт примеров) или '/phys' (для решения задач)." )
        bot.send_message(message.chat.id, 'Выбирай:')

@bot.message_handler(commands=['math'])
def choose_math_action(message):
    markup = telebot.types.ReplyKeyboardMarkup(one_time_keyboard=True)
    markup.add('Сложение', 'Вычитание', 'Умножение', 'Деление')
    bot.send_message(message.chat.id, "Выберите действие:", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text in ['Сложение', 'Вычитание', 'Умножение', 'Деление'])
def perform_math_action(message):
    action = message.text
    bot.send_message(message.chat.id, f"Ты выбрал: {action}. Введи два числа через пробел:")

    # Сохраняем действие для дальнейшего использования
    bot.register_next_step_handler(message, lambda msg: calculate_result(msg, action))


def calculate_result(message, action):
    try:
        num1, num2 = map(float, message.text.split())
        if action == 'Сложение':
            result = num1 + num2
        elif action == 'Вычитание':
            result = num1 - num2
        elif action == 'Умножение':
            result = num1 * num2
        elif action == 'Деление':
            result = num1 / num2 if num2 != 0 else "Я не буду делить на ноль! Выбери действие ещё раз."

        bot.send_message(message.chat.id, f"Результат: {result}")
    except ValueError:
        bot.send_message(message.chat.id, "введи два числа через пробел.")


bot.polling()
